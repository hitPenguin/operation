# 存储

## 数据库范式 

* 基本概念:
```
  实体：现实世界中客观存在并可以被区别的事物。比如“一个学生”、“一本书”、“一门课”等等。值得强调的是这里所说的“事物”不仅仅是看得见摸得着的“东西”，它也可以是虚拟的，比如说“老师与学校的关系”。
  属性：教科书上解释为：“实体所具有的某一特性”，由此可见，属性一开始是个逻辑概念，比如说，“性别”是“人”的一个属性。在关系数据库中，属性又是个物理概念，属性可以看作是“表的一列”。
  元组：表中的一行就是一个元组。
  分量：元组的某个属性值。在一个关系数据库中，它是一个操作原子，即关系数据库在做任何操作的时候，属性是“不可分的”。否则就不是关系数据库了。
  码：表中可以唯一确定一个元组的某个属性（或者属性组），如果这样的码有不止一个，那么大家都叫候选码，我们从候选码中挑一个出来做老大，它就叫主码。
  全码：如果一个码包含了所有的属性，这个码就是全码。
  主属性：一个属性只要在任何一个候选码中出现过，这个属性就是主属性。
  非主属性：与上面相反，没有在任何候选码中出现过，这个属性就是非主属性。
  外码：一个属性（或属性组），它不是码，但是它别的表的码，它就是外码。
```

* 以下以 (姓名,课程)码 作参考:

1. 第一范式(1NF):
```
  每个属性不可再分 --- R∈1NF
```
2. 第二范式(2NF):
```
  表中的所有属性都必须 完全依赖 于 主键 (不能 部分依赖 或者 不依赖):
    教材 依赖于 课程 (部分依赖)
```
3. 第三范式(3NF):
```
  要满足不存在非主属性对候选码的传递函数依赖:
    老师职称 依赖于 老师 依赖于 键
```
4. BC范式(BCNF):
```
  要满足不存在任一属性（包含非主属性和主属性）对候选码的传递函数依赖:
    主属性 部分依赖于 主属性
```

## 分布式系统的事务处理

* 通常的服务器扩展:

1. 数据分区
2. 数据镜像

* 数据一致性:
```
  1. Weak 弱一致性: 写入新值后，读操作在数据副本上可能读出来，也可能读不出来
  2. Eventually 最终一致性: 写入一个新值后，可能读不出来，但最终能读出来
  3. Strong 强一致性: 新数据一旦写入，在副本任意时刻都能读到新值
```